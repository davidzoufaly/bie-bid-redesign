"use strict";var appLang,jsonData,schoolsJsonData,stringObject={en:{str1:"Your text is too long!",str2:"Characters left:",str3:"School Name:",str4:"Place World:",str5:"Place Country:",str6:"Place Region:",str7:"Place by school type:",str8:"WRONG ID",str9:"Name",str10:"Lastname Initials",str11:"Age",str12:"Points",str13:"Time End (minutes)"},cz:{str1:"Text je příliš dlouhý",str2:"Zbývá znaků:",str3:"Název školy:",str4:"Pozice ve světě:",str5:"Pozice v zemi:",str6:"Pozice v kraji:",str7:"Pozice podle typu školy:",str8:"ŠPATNÉ ID",str9:"Jméno",str10:"Iniciály příjmení",str11:"Věk",str12:"Body",str13:"Čas konce (minuty)"}},DOMObjects={input:"input",inputCounter:"char-counter",wrongID:"wrong-id",schoolWrapper:"school-wrapper",tableWrapper:"table-wrapper"},en=stringObject.en,cz=stringObject.cz,currentLang=document.documentElement.lang;switch(currentLang){case"cs-CZ":appLang=cz;break;case"en-US":appLang=en}function searching(){var searchingSchoolID,charCount;document.getElementById(DOMObjects.input).addEventListener("input",function(){searchingSchoolID=document.getElementById(DOMObjects.input).value,charCount=8-searchingSchoolID.length,document.getElementById(DOMObjects.inputCounter).innerHTML=charCount<0?appLang.str1:"".concat(appLang.str2," ").concat(charCount),document.getElementById(DOMObjects.tableWrapper).innerHTML="",8===searchingSchoolID.length?(document.getElementById(DOMObjects.inputCounter).style.backgroundColor="#95c255",hledejStudenty(searchingSchoolID),hledejSkoly(searchingSchoolID)):(document.getElementById(DOMObjects.inputCounter).style.backgroundColor="#de635a",document.getElementById(DOMObjects.wrongID).textContent="",document.getElementById(DOMObjects.wrongID).style.display="none",document.getElementById(DOMObjects.schoolWrapper).classList.add("hide"),document.getElementById(DOMObjects.tableWrapper).classList.add("hide"),document.getElementById(DOMObjects.schoolWrapper).innerHTML="")})}function hledejSkoly(id){var schoolById=schoolsJsonData.skola.filter(function(e){return e.id.toLowerCase()===id.toLowerCase()});if(0<schoolById.length){var filteredSchoolResult="<p><strong>".concat(appLang.str3,"</strong> ").concat(schoolById[0].schoolName,"</p>\n        <p><strong>").concat(appLang.str4,"</strong> ").concat(schoolById[0].placeWorld,"</p>\n        <p><strong>").concat(appLang.str5,"</strong> ").concat(schoolById[0].placeCountry,"</p>\n        <p><strong>").concat(appLang.str6,"</strong> ").concat(schoolById[0].placeRegion,"</p>\n        <p><strong>").concat(appLang.str7,"</strong> ").concat(schoolById[0].placeSchoolType,"</p>");document.getElementById(DOMObjects.schoolWrapper).innerHTML=filteredSchoolResult,document.getElementById(DOMObjects.schoolWrapper).classList.remove("hide")}}function hledejStudenty(id){var filtrovanaData=jsonData.skola.filter(function(skola){return skola.id.toLowerCase()===id.toLowerCase()});if(0===filtrovanaData.length)document.getElementById(DOMObjects.wrongID).style.display="block",document.getElementById(DOMObjects.wrongID).textContent=appLang.str8;else{var headings=[appLang.str9,appLang.str10,appLang.str11,appLang.str4,appLang.str5,appLang.str12,appLang.str13],promenne=[[],[],[],[],[],[],[]];filtrovanaData.forEach(function(entry){promenne[0].push(entry.name),promenne[1].push(entry.lastNameInitial),promenne[2].push(entry.age),promenne[3].push(entry.place),promenne[4].push(entry.placeCountry),promenne[5].push(entry.points),promenne[6].push(Math.round(entry.timeEnd/60))});var tableContainer=document.createElement("DIV"),table=document.createElement("TABLE"),tableFirstRow=document.createElement("TR");if(document.getElementById(DOMObjects.tableWrapper).appendChild(tableContainer),document.getElementById(DOMObjects.tableWrapper).classList.remove("hide"),tableContainer.appendChild(table),table.appendChild(tableFirstRow),0<filtrovanaData.length)for(var j=0;j<headings.length;j++){var tableHeading=document.createElement("TH");tableFirstRow.appendChild(tableHeading),tableHeading.innerHTML=headings[j]}for(var i=0;i<filtrovanaData.length;i++){var tableRow=document.createElement("TR");table.appendChild(tableRow);for(var o=0;o<promenne.length;o++){var tableData=document.createElement("TD");tableRow.appendChild(tableData),tableData.innerHTML=promenne[o][i]}}}}window.addEventListener("DOMContentLoaded",function(){fetch(schoolData).then(function(response){return response.text()}).then(function(mySchools){schoolsJsonData=mySchools.trim().split("\n").map(function(line){return line.split("\t")}).reduce(function(skola,line){return skola.skola=skola.skola||[],skola.skola.push({id:line[0],placeWorld:line[1],placeCountry:line[2],placeRegion:line[3],placeSchoolType:line[4],schoolName:line[5]}),skola},{})}),fetch(studentsData).then(function(response){return response.text()}).then(function(myText){jsonData=myText.trim().split("\n").map(function(line){return line.split("\t")}).reduce(function(skoly,line){return skoly.skola=skoly.skola||[],skoly.skola.push({name:line[0],lastNameInitial:line[1],id:line[3],place:line[6],placeCountry:line[7],points:line[4],timeEnd:line[5],age:line[2]}),skoly},{}),searching()})});